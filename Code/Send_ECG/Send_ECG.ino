// Simuler l'envoie de valeurs pour le projet ECG
// Signal provenant du site : https://www.physionet.org/physiobank/database/
#define FREQ 60
#define NB_MAX 400 // Nombre d'Ã©chantillons
#define T_MAX 1108  // Temps max en ms
#define DELAY 1000/FREQ

const uint16_t t_t[] = {0, 3, 6, 8, 11, 14, 17, 19, 22, 25, 28, 31, 33, 36, 39, 42, 44, 47, 50, 53, 56, 58, 61, 64, 67, 69, 72, 75, 78, 81, 83, 86, 89, 92, 94, 97, 100, 103, 106, 108, 111, 114, 117, 119, 122, 125, 128, 131, 133, 136, 139, 142, 144, 147, 150, 153, 156, 158, 161, 164, 167, 169, 172, 175, 178, 181, 183, 186, 189, 192, 194, 197, 200, 203, 206, 208, 211, 214, 217, 219, 222, 225, 228, 231, 233, 236, 239, 242, 244, 247, 250, 253, 256, 258, 261, 264, 267, 269, 272, 275, 278, 281, 283, 286, 289, 292, 294, 297, 300, 303, 306, 308, 311, 314, 317, 319, 322, 325, 328, 331, 333, 336, 339, 342, 344, 347, 350, 353, 356, 358, 361, 364, 367, 369, 372, 375, 378, 381, 383, 386, 389, 392, 394, 397, 400, 403, 406, 408, 411, 414, 417, 419, 422, 425, 428, 431, 433, 436, 439, 442, 444, 447, 450, 453, 456, 458, 461, 464, 467, 469, 472, 475, 478, 481, 483, 486, 489, 492, 494, 497, 500, 503, 506, 508, 511, 514, 517, 519, 522, 525, 528, 531, 533, 536, 539, 542, 544, 547, 550, 553, 556, 558, 561, 564, 567, 569, 572, 575, 578, 581, 583, 586, 589, 592, 594, 597, 600, 603, 606, 608, 611, 614, 617, 619, 622, 625, 628, 631, 633, 636, 639, 642, 644, 647, 650, 653, 656, 658, 661, 664, 667, 669, 672, 675, 678, 681, 683, 686, 689, 692, 694, 697, 700, 703, 706, 708, 711, 714, 717, 719, 722, 725, 728, 731, 733, 736, 739, 742, 744, 747, 750, 753, 756, 758, 761, 764, 767, 769, 772, 775, 778, 781, 783, 786, 789, 792, 794, 797, 800, 803, 806, 808, 811, 814, 817, 819, 822, 825, 828, 831, 833, 836, 839, 842, 844, 847, 850, 853, 856, 858, 861, 864, 867, 869, 872, 875, 878, 881, 883, 886, 889, 892, 894, 897, 900, 903, 906, 908, 911, 914, 917, 919, 922, 925, 928, 931, 933, 936, 939, 942, 944, 947, 950, 953, 956, 958, 961, 964, 967, 969, 972, 975, 978, 981, 983, 986, 989, 992, 994, 997, 1000, 1003, 1006, 1008, 1011, 1014, 1017, 1019, 1022, 1025, 1028, 1031, 1033, 1036, 1039, 1042, 1044, 1047, 1050, 1053, 1056, 1058, 1061, 1064, 1067, 1069, 1072, 1075, 1078, 1081, 1083, 1086, 1089, 1092, 1094, 1097, 1100, 1103, 1106, 1108};
const int16_t v_LII[] = {390, 380, 390, 360, 360, 370, 420, 410, 390, 380, 380, 390, 390, 400, 360, 370, 360, 380, 390, 380, 390, 370, 360, 360, 390, 390, 380, 370, 370, 380, 410, 430, 410, 400, 380, 390, 410, 410, 400, 390, 390, 370, 370, 360, 340, 330, 310, 310, 320, 330, 310, 280, 240, 260, 290, 320, 300, 270, 290, 280, 320, 320, 320, 310, 310, 340, 340, 400, 420, 400, 430, 450, 470, 500, 500, 520, 530, 520, 560, 580, 570, 590, 580, 590, 590, 600, 600, 600, 590, 590, 600, 630, 630, 610, 590, 600, 620, 620, 620, 590, 560, 560, 570, 610, 590, 560, 540, 550, 580, 590, 570, 560, 560, 550, 570, 580, 560, 560, 540, 550, 550, 580, 570, 560, 550, 560, 560, 580, 570, 540, 520, 530, 530, 540, 550, 520, 500, 510, 530, 530, 550, 510, 510, 520, 550, 560, 560, 530, 510, 520, 570, 550, 560, 540, 510, 510, 510, 530, 520, 520, 500, 520, 540, 550, 540, 530, 520, 540, 550, 560, 550, 540, 530, 540, 550, 580, 580, 560, 550, 570, 610, 620, 640, 620, 620, 650, 690, 690, 700, 690, 700, 720, 740, 760, 760, 750, 740, 730, 730, 740, 730, 730, 710, 710, 690, 750, 730, 710, 660, 700, 750, 790, 760, 720, 650, 620, 610, 600, 560, 530, 540, 500, 520, 500, 530, 520, 530, 520, 520, 550, 560, 530, 530, 510, 530, 530, 510, 510, 450, 460, 510, 520, 520, 500, 470, 490, 480, 460, 400, 320, 270, 230, 200, 150, 140, 260, 520, 840, 1190, 1670, 2200, 2650, 2940, 3040, 2840, 2220, 1410, 710, 320, 260, 330, 410, 450, 440, 420, 410, 460, 460, 430, 420, 400, 410, 440, 430, 430, 440, 410, 430, 420, 440, 430, 410, 420, 440, 450, 450, 460, 460, 430, 440, 460, 470, 470, 470, 450, 450, 450, 470, 460, 440, 430, 450, 470, 460, 470, 460, 430, 420, 450, 470, 480, 470, 430, 430, 460, 470, 480, 450, 430, 440, 450, 470, 460, 440, 440, 430, 440, 470, 470, 450, 450, 460, 480, 470, 480, 460, 430, 440, 460, 450, 440, 440, 410, 400, 420, 430, 420, 400, 380, 420, 400, 410, 430, 400, 400, 410, 430, 450, 470, 500, 510, 540, 580, 590, 590, 600, 590, 610, 610, 650, 660, 630, 620, 650, 670, 680, 670, 650, 640, 680, 700, 680, 690, 670, 640, 670, 670, 670, 670, 660};
const int16_t v_LV[] = {0};// = {500, 520, 480, 450, 440, 480, 510, 490, 500, 470, 490, 470, 490, 490, 480, 480, 480, 460, 500, 490, 470, 460, 460, 480, 500, 460, 440, 440, 410, 440, 460, 450, 450, 410, 410, 430, 440, 420, 390, 360, 340, 370, 380, 350, 310, 290, 290, 300, 280, 240, 240, 210, 190, 220, 230, 220, 200, 200, 200, 240, 280, 270, 280, 280, 290, 350, 410, 420, 420, 440, 440, 510, 550, 580, 580, 560, 570, 580, 620, 610, 610, 600, 610, 620, 640, 620, 620, 600, 600, 620, 670, 660, 630, 640, 640, 650, 640, 640, 640, 620, 630, 630, 650, 650, 640, 610, 630, 650, 650, 660, 620, 620, 610, 630, 630, 630, 620, 600, 590, 620, 620, 620, 610, 590, 610, 640, 650, 610, 600, 570, 590, 590, 620, 600, 610, 580, 600, 600, 630, 600, 600, 600, 590, 610, 630, 610, 620, 590, 580, 620, 630, 620, 600, 600, 580, 590, 620, 600, 610, 590, 600, 610, 630, 620, 610, 610, 600, 630, 640, 620, 600, 590, 570, 600, 640, 620, 620, 610, 590, 600, 620, 600, 610, 610, 600, 660, 660, 640, 650, 650, 660, 670, 710, 710, 690, 690, 680, 710, 720, 690, 700, 680, 700, 710, 750, 750, 740, 690, 690, 710, 700, 690, 670, 660, 650, 670, 680, 650, 660, 620, 630, 650, 660, 640, 610, 620, 600, 600, 630, 640, 630, 600, 590, 620, 650, 620, 610, 600, 630, 630, 650, 630, 620, 600, 580, 570, 540, 470, 430, 380, 330, 350, 480, 700, 950, 1200, 1430, 1680, 1910, 2140, 2360, 2360, 2060, 1470, 870, 500, 470, 520, 550, 540, 590, 590, 550, 540, 540, 550, 580, 550, 550, 520, 540, 550, 570, 560, 540, 540, 520, 570, 570, 540, 540, 520, 530, 550, 540, 540, 540, 540, 550, 560, 600, 590, 560, 540, 530, 560, 560, 560, 570, 550, 560, 560, 570, 570, 550, 520, 540, 570, 570, 570, 540, 530, 530, 540, 540, 550, 530, 500, 490, 490, 510, 520, 480, 470, 490, 490, 500, 460, 440, 430, 430, 410, 440, 410, 360, 350, 340, 340, 350, 350, 330, 290, 280, 290, 290, 300, 280, 260, 290, 270, 290, 280, 290, 300, 310, 380, 420, 430, 450, 430, 480, 530, 600, 600, 610, 590, 620, 640, 660, 680, 660, 670, 690, 710, 750, 730, 700, 680, 700, 710, 730, 720, 720, 690, 700, 710, 720, 710, 690, 680, 670, 710, 740, 730, 720, 700, 690, 710, 720, 720, 700, 680, 670, 670, 700, 670, 690, 660, 660, 690, 690, 670, 640, 620, 620, 630, 670, 680, 650, 640, 600, 640, 650, 640, 640, 620, 620, 650, 650, 630, 630, 590, 620, 610, 640, 640, 610, 580, 600, 610, 630, 620, 610, 590, 610, 610, 620, 630, 580, 600, 610, 610, 650, 610, 620, 580, 590, 600, 630, 620, 610, 600, 620, 630, 650, 630, 610, 600, 600, 600, 630, 640, 630, 590, 600, 620, 630, 630, 600, 600, 600, 640, 650, 630, 610, 630, 620, 670, 670, 680, 680, 680, 650, 680, 710, 710, 740, 730, 730, 700, 720, 730, 730, 720, 710, 720, 730, 700, 660, 650, 640, 660, 660, 640, 650, 610, 600, 610, 630, 620, 610, 590, 570, 620, 620, 600, 580, 570, 550, 590, 640, 600, 590, 570, 550, 590, 620, 590, 540, 490, 440, 420, 400, 390, 350, 300, 220, 220, 300, 410, 580, 800, 1050, 1280, 1460, 1680, 1890, 2100, 2270, 2280, 1990, 1320, 720, 400, 440, 510, 530, 530, 550, 510, 500, 530, 530, 500, 510, 510, 510, 520, 530, 510, 510, 490, 480, 520, 540, 530, 510, 500, 480, 510, 520, 520, 530, 500, 510, 520, 540, 530, 540, 500, 520, 530, 540, 540, 530, 520, 490, 530, 570, 550, 520, 510, 490, 520, 550, 540, 530, 510, 490, 500, 530, 510, 480, 490, 490, 500, 490, 500, 510, 460, 440, 460, 490, 450, 430, 430, 420, 420, 430, 420, 390, 350, 350, 340, 380, 360, 340, 310, 300, 280, 290, 270, 270, 240, 230, 260, 260, 260, 250, 230, 240, 280, 300, 320, 320, 320, 340, 400, 460, 460, 520, 490, 500, 560, 590, 620, 630, 600, 620, 630, 660, 670, 620, 660, 630, 690, 690, 670, 660, 650, 650, 670, 710, 690, 660, 660, 630, 650, 660, 680, 670, 620, 630, 630, 650, 640, 620, 620, 600, 620, 660, 640, 610, 570, 570, 610, 630, 620, 620, 610, 580, 600, 610, 600, 590, 580, 560, 600, 610, 590, 560, 530, 530, 550, 590, 570, 560, 550, 550, 570, 580, 560, 570, 540, 540, 550, 550, 550, 530, 530, 550, 560, 590, 580, 570, 570, 550, 570, 570, 530, 540, 510, 510, 540, 540, 570, 560, 570, 570, 560, 580, 580, 560, 510, 530, 550, 550, 540, 550, 510, 510, 550, 590, 580, 570, 580, 580, 590, 600, 620, 580, 600, 610, 640, 640, 640, 640, 630, 600, 630, 660, 650, 620, 580, 590, 600, 600, 560, 550, 530, 520, 590, 580, 570, 550, 490, 510, 520, 540, 520, 500, 490, 470, 500, 520, 510, 510, 490, 490, 510, 520, 490, 480, 460, 460, 490, 520, 490, 450, 400, 340, 330, 340, 280, 250, 340, 510, 710, 900, 1030, 1150, 1320, 1560, 1770, 1830, 1600, 1130, 600, 250, 230, 330, 360, 370, 360, 360, 390, 440, 420, 420, 400, 380, 390, 430, 420, 410, 410, 410, 410, 430, 400, 390, 360, 370, 410, 430, 430, 410, 400, 400, 420, 430, 430, 420, 390, 410, 420, 470, 440, 440, 410, 410, 400, 410, 420, 410, 400, 390, 420, 430, 420, 390, 370, 380, 420, 440, 410, 400, 410, 400, 390, 410, 430, 400, 400, 390, 400, 390, 390, 380, 380, 360, 380, 370, 360, 350, 330, 290, 320, 330, 310, 290, 240, 200, 210, 240, 230, 200, 170, 160, 170, 190, 190, 170, 150, 120, 170, 180, 160, 120, 150, 160, 210, 250, 280, 290, 290, 300, 320, 360, 370, 370, 400, 440, 490, 500, 470, 440, 430, 440, 470, 490, 490, 510, 470, 480, 470, 500, 470, 460, 470, 450, 490, 510, 490, 480, 450, 470, 480, 500, 480, 450, 440, 430, 460, 460, 470, 460, 440, 430, 440, 460, 460, 450, 450, 430, 410, 450, 400, 400, 400, 380, 390, 430, 410, 400, 380, 370, 400, 420, 390, 390, 380, 370, 380, 420, 390, 360, 370, 370, 390, 400, 390, 370, 350, 340, 380, 410, 400, 390, 390, 340, 370, 410, 380, 380, 390, 350, 380, 380, 370, 370, 350, 360, 400, 410, 400, 360, 350, 350, 360, 390, 420, 390, 370, 360, 370, 410, 390, 370, 350, 380, 400, 430, 440, 410, 420, 410, 430, 470, 460, 440, 440, 430, 460, 490, 490, 480, 470, 460, 470, 480, 460, 450, 420, 420, 440, 460, 440, 430, 360, 380, 370, 380, 390, 390, 360, 360, 370, 380, 390, 380, 380, 390, 400, 430, 400, 400, 390, 380, 380, 420, 410, 390, 400, 380, 400, 390, 350, 300, 260, 200, 200, 190, 200, 320, 510, 720, 920, 1080, 1210, 1410, 1640, 1830, 1860, 1680, 1100, 530, 170, 120, 220, 300, 330, 350, 350, 350, 380, 400, 400, 370, 390, 380, 400, 400, 380, 400, 350, 370, 370, 430, 410, 400, 360, 370, 390, 420, 430, 410, 380, 380, 400, 420, 400, 390, 400, 390, 420, 410, 430, 410, 380, 390, 420, 420, 420, 410, 390, 390, 420, 430, 440, 410, 380, 380, 360, 400, 390, 390, 380, 380, 390, 400, 390, 380, 340, 340, 350, 390, 370, 330, 320, 320, 310, 350, 340, 310, 290, 270, 280, 290, 270, 260, 210, 190, 210, 230, 200, 190, 150, 130, 160, 140, 150, 150, 110, 120, 130, 170, 160, 180, 210, 250, 290, 320, 320, 340, 370, 360, 410, 450, 470, 490, 460, 480, 510, 530, 540, 550, 550, 540, 560, 560, 580, 560, 570, 550, 570, 590, 580, 570, 530, 550, 570, 590, 580, 580, 520, 520, 540, 560, 560, 550, 510, 510, 540, 550, 540, 540, 530, 540, 540, 550, 540, 510, 500, 490, 550, 550, 540, 510, 500, 500, 510, 530, 530, 520, 490, 490, 520, 540, 530, 490, 500, 490, 520, 540, 510, 520, 480, 480, 510, 530, 520, 530, 490, 510, 500, 520, 540, 500, 490, 500, 510, 530, 520, 530, 510, 490, 530, 540, 530, 510, 510, 500, 520, 550, 550, 530, 520, 500, 520, 540, 550, 520, 530, 520, 550, 580, 530, 530, 550, 550, 570, 610, 620, 590, 570, 600, 610, 660, 650, 630, 650, 620, 670, 660, 660, 670, 630, 630, 650, 630, 600, 610, 590, 580, 600, 610, 580, 570, 590, 550, 540, 560, 570, 560, 550, 540, 570, 580, 570, 560, 540, 530, 540, 590, 570, 560, 540, 520, 520, 550, 560, 550, 510, 450, 410, 390, 340, 280, 310, 410, 670, 950, 1200, 1430, 1660, 1920, 2190, 2370, 2340, 1960, 1290, 700, 460, 530, 540, 500, 490, 490, 500, 490, 490, 480, 460, 450, 470, 480, 460, 450, 430, 460, 440, 470, 480, 450, 440, 450, 470, 480, 470, 470, 460, 470, 470, 480, 480, 470, 430, 440, 480, 490, 490, 480, 460, 440, 470, 510, 490, 490, 460, 440, 460, 490, 490, 480, 460, 460, 460, 470, 460, 450, 430, 450, 450, 460, 440, 420, 390, 400, 400, 420, 400, 390, 360, 350, 360, 380, 340, 290, 300, 280, 300, 310, 290, 260, 230, 230, 240, 250, 240, 210, 190, 190, 210, 230, 240, 240, 230, 240, 280, 310, 340, 360, 380, 410, 450, 490, 510, 520, 520, 550, 600, 620, 620, 590, 600, 600, 600, 630, 630, 620, 630, 630, 630, 660, 650, 620, 610, 620, 640, 660, 640, 610, 600, 610, 630, 640, 630, 620, 600, 590, 610, 630, 610, 610, 580, 580, 600, 620, 610, 600, 580, 580, 590, 620, 620, 600, 570, 550, 580, 580, 580, 580, 530, 550, 580, 580, 590, 570, 550, 560, 570, 570, 570, 560, 550, 540, 560, 570, 560, 540, 540, 530, 560, 590, 550, 560, 530, 530, 570, 590, 600, 590, 550, 550, 570, 590, 580, 560, 570, 590, 600, 580, 590, 590, 570, 560, 590, 600, 600, 590, 560, 570, 590, 620, 630, 600, 600, 590, 620, 650, 640, 630, 630, 650, 670, 690, 680, 660, 650, 660, 680, 740, 720, 710, 690, 700, 690, 730, 680, 670, 640, 640, 660, 670, 650, 640, 600, 590, 600, 650, 620, 600, 590, 560, 580, 620, 600, 580, 590, 580, 610, 610, 600, 600, 600, 590, 600, 600, 560, 490, 440, 380, 350, 330, 330, 420, 610, 860, 1100, 1330, 1540, 1780, 1980, 2180, 2210, 1880, 1200, 630, 390, 450, 510, 530, 530, 540, 520, 520, 540, 550, 530, 520, 530, 500, 540, 540, 530, 500, 500, 500, 530, 530, 540, 500, 480, 490, 520, 550, 550, 530, 500, 480, 500, 550, 540, 540, 510, 510, 540, 550, 550, 540, 540, 550, 540, 580, 570, 540, 540, 520, 530, 550, 550, 530, 500, 490, 500, 540, 520, 480, 490, 460, 460, 500, 480, 460, 440, 440, 440, 440, 430, 420, 390, 390, 420, 420, 410, 370, 320, 330, 330, 360, 320, 320, 280, 280, 270, 300, 320, 280, 250, 260, 270, 290, 280, 250, 240, 250, 260, 310, 310, 320, 310, 350, 380, 410, 410, 430, 440, 460, 480, 510, 540, 520, 510, 550, 570, 600, 590, 600, 580, 560, 550, 580, 580, 570, 540, 550, 580, 580, 570, 560, 540, 540, 530, 560, 560, 540, 520, 510, 530, 570, 570, 540, 490, 520, 520, 530, 530, 540, 530, 530, 540, 550, 530, 520, 490, 470, 500, 540, 530, 500, 470, 470, 480, 490, 500, 490, 480, 470, 480, 500, 480, 480, 480, 460, 480, 490, 500, 470, 450, 460, 480, 490, 490, 460, 460, 450, 470, 510, 500, 490, 470, 460, 480, 480, 480, 470, 450, 460, 460, 500, 490, 490, 450, 450, 480, 500, 510, 460, 460, 440, 470, 510, 490, 470, 470, 500, 540, 550, 530, 510, 490, 510, 520, 560, 560, 540, 550, 570, 580, 590, 590, 550, 520, 500, 500, 530, 540, 520, 470, 460, 460, 490, 510, 470, 450, 460, 450, 450, 450, 440, 460, 460, 460, 450, 450, 450, 450, 420, 440, 490, 470, 460, 400, 370, 330, 320, 290, 220, 150, 210, 360, 560, 730, 870, 930, 1040, 1150, 1380, 1580, 1810, 1970, 2040, 2020, 1720, 1140, 560, 190, 90, 190, 250, 290, 320, 340, 320, 360, 360, 370, 360, 320, 330, 330, 370, 350, 360, 320, 330, 330, 360, 360, 330, 330, 310, 340, 360, 360, 340, 330, 330, 340, 350, 370, 360, 330, 360, 340, 380, 350, 320, 330, 310, 330, 360, 370, 340, 300, 290, 320, 330, 340, 340, 350, 320, 340, 330, 320, 280, 270, 290, 310, 320, 280, 280, 210, 240, 270, 270, 280, 260, 240, 250, 260, 260, 240, 200, 170, 140, 140, 160, 120, 120, 90, 80, 80, 80, 70, 50, 30, 0, 30, 60, 50, 20, 30, 70, 100, 150, 150, 150, 170, 190, 240, 270, 270, 290, 290, 310, 340, 370, 370, 390, 370, 390, 400, 410, 410, 410, 400, 380, 420, 420, 440, 400, 370, 360, 400, 410, 410, 400, 370, 360, 390, 430, 420, 410, 360, 360, 400, 370, 380, 360, 370, 350, 360, 380, 360, 360, 340, 340, 360, 380, 360, 360, 340, 350, 340, 370, 340, 330, 340, 370, 360, 360, 360, 340, 370, 310, 310, 350, 350, 350, 330, 310, 310, 330, 330, 340, 330, 330, 350, 360, 350, 340, 320, 330, 350, 390, 380, 370, 350, 330, 370, 370, 380, 370, 350, 350, 370, 390, 390, 370, 360, 360, 360, 380, 410, 380, 370, 360, 400, 450, 420, 420, 440, 450, 490, 510, 470, 470, 460, 470, 500, 540, 520, 500, 490, 480, 490, 510, 480, 440, 440, 440, 460, 460, 460, 420, 400, 400, 430, 440, 450, 430, 400, 400, 400, 440, 440, 400, 410, 400, 430, 430, 420, 410, 400, 410, 420, 440, 450, 400, 380, 350, 340, 290, 220, 190, 140, 230, 440, 730, 960, 1120, 1290, 1540, 1820, 2040, 2000, 1640, 970, 350, 170, 220, 290, 330, 320, 340, 370, 370, 380, 350, 310, 330, 340, 340, 350, 350, 340, 350, 350, 370, 360, 360, 350, 360, 380, 380, 390, 360, 360, 370, 380, 410, 380, 390, 370, 370, 380, 400, 400, 370, 360, 360, 410, 410, 390, 360, 380, 370, 390, 400, 390, 370, 360, 350, 380, 400, 370, 380, 340, 330, 340, 350, 360, 340, 300, 320, 300, 300, 320, 300, 280, 270, 290, 310, 290, 270, 240, 200, 210, 200, 200, 180, 160, 150, 130, 140, 110, 100, 70, 70, 100, 120, 110, 90, 80, 110, 120, 190, 190, 210, 210, 270, 300, 320, 350, 370, 400, 400, 430, 470, 480, 470, 470, 480, 510, 560, 520, 520, 490, 470, 510, 540, 510, 520, 500, 490, 500, 520, 510, 490, 490, 480, 500, 520, 510, 510, 480, 470, 510, 530, 520, 490, 480, 490, 490, 510, 490, 490, 480, 470, 490, 500, 470, 460, 440, 460, 480, 490, 470, 450, 430, 430, 440, 480, 470, 460, 440, 440, 450, 460, 450, 470, 440, 450, 480, 510, 500, 470, 460, 450, 460, 480, 480, 480, 470, 480, 490, 510, 470, 470, 460, 490, 480, 510, 500, 480, 470, 480, 490, 540, 520, 520, 490, 480, 490, 510, 550, 510, 520, 490, 500, 520, 510, 490, 490, 490, 540, 530, 550, 540, 530, 540, 580, 620, 600, 580, 580, 570, 590, 630, 640, 640, 650, 650, 650, 670, 670, 640, 630, 640, 640, 650, 630, 600, 580, 580, 590, 620, 600, 580, 580, 560, 570, 590, 570, 560, 540, 530, 540, 590, 560, 540, 540, 540, 560, 580, 560, 550, 530, 530, 550, 570, 550, 520, 500, 500, 460, 430, 370, 300, 230, 210, 320, 580, 820, 1080, 1280, 1520, 1790, 2050, 2280, 2460, 2470, 2070, 1370, 800, 480, 460, 460, 440, 470, 490, 500, 510, 470, 470, 470, 490, 480, 460, 460, 440, 450, 450, 470, 460, 440, 430, 450, 470, 470, 460, 430, 450, 460, 490, 480, 460, 440, 430, 470, 480, 470, 470, 460, 450, 470, 490, 480, 470, 450, 440, 460, 490, 450, 460, 440, 440, 470, 500, 470, 450, 440, 430, 460, 460, 450, 440, 420, 420, 410, 420, 390, 410, 380, 370, 390, 430, 400, 390, 360, 350, 340, 360, 340, 330, 300, 270, 310, 290, 270, 250, 230, 230, 240, 240, 190, 170, 160, 120, 140, 160, 140, 140, 120, 110, 130, 150, 170, 160, 170, 190, 240, 260, 280, 310, 300, 340, 380, 440, 450, 440, 440, 470, 490, 510, 520, 520, 530, 520, 550, 560, 580, 570, 510, 530, 560, 560, 570, 550, 540, 530, 550, 570, 550, 540, 540, 530, 560, 560, 550, 520, 520, 520, 510, 560, 560, 550, 530, 520, 540, 530, 530, 520, 520, 530, 510, 540, 530, 500, 510, 500, 540, 540, 520, 510, 480, 500, 520, 520, 510, 510, 510, 520, 510, 520, 510, 500, 490, 460, 470, 500, 520, 510, 480, 500, 500, 520, 510, 490, 490, 490, 520, 540, 510, 500, 500, 490, 530, 540, 530, 540, 500, 500, 530, 540, 520, 530, 510, 520, 540, 550, 530, 540, 500, 520, 540, 570, 560, 540, 560, 520, 560, 570, 560, 550, 520, 520, 570, 600, 580, 550, 560, 550, 580, 610, 620, 630, 630, 600, 640, 650, 660, 640, 650, 660, 700, 700, 680, 680, 670, 640, 670, 660, 630, 630, 610, 600, 620, 620, 600, 610, 580, 580, 590, 610, 610, 570, 570, 560, 590, 590, 590, 560, 540, 550, 550, 570, 560, 550, 560, 550, 580, 610, 590, 560, 510, 500, 490, 480, 410, 360, 270, 260, 300, 470, 710, 950, 1130, 1300, 1540, 1780, 1970, 2170, 2250, 2080, 1600, 990, 530, 370, 440, 500, 480, 520, 550, 530, 510, 510, 510, 520, 510, 510, 490, 470, 500, 520, 510, 500, 490, 490, 510, 510, 510, 530, 490, 470, 510, 540, 520, 510, 480, 480, 550, 550, 510, 520, 500, 510, 520, 540, 540, 520, 500, 500, 520, 550, 530, 510, 490, 490, 500, 530, 520, 490, 480, 480, 520, 520, 500, 460, 450, 450, 480, 500, 460, 430, 440, 410, 440, 440, 430, 420, 380, 380, 380, 400, 380, 350, 310, 290, 310, 330, 290, 280, 250, 230, 240, 260, 250, 210, 190, 190, 190, 240, 220, 210, 200, 220, 230, 290, 290, 300, 290, 310, 360, 430, 410, 450, 440, 450, 470, 510, 500, 500, 500, 510, 560, 560, 570, 560, 540, 510, 520, 550, 550, 560, 540, 540, 540, 590, 560, 510, 500, 510, 540, 560, 530, 530, 510, 500, 520, 560, 540, 510, 520, 490, 510, 530, 520, 500, 500, 500, 480, 530, 500, 480, 470, 470, 500, 510, 480, 470, 440, 440, 460, 480, 460, 470, 440, 450, 450, 460, 460, 470, 460, 460, 470, 500, 480, 440, 440, 440, 460, 480, 500, 500, 480, 460, 470, 500, 480, 440, 450, 430, 460, 510, 470, 490, 460, 450, 460, 480, 480, 470, 440, 460, 480, 490, 480, 430, 420, 430, 450, 460, 460, 460, 450, 430, 470, 490, 510, 510, 510, 520, 550, 550, 540, 520, 530, 560, 580, 600, 550, 550, 520, 520, 560, 570, 570, 550, 500, 480, 490, 520, 510, 500, 470, 450, 480, 480, 460, 460, 450, 440, 480, 520, 460, 430, 410, 400, 420, 450, 470, 450, 420, 450, 440, 470, 480, 450, 450, 460, 490, 460, 410, 330, 260, 280, 260, 210, 160, 200, 310, 530, 770, 910, 1030, 1180, 1350, 1620, 1860, 1900, 1560, 920, 350, 110, 170, 270, 330, 350, 350, 330, 350, 370, 380, 380, 380, 380, 430, 390, 370, 360, 340, 380, 390, 420, 380, 380, 380, 370, 420, 440, 440, 430, 420, 410, 410, 440, 400, 390, 390, 400, 400, 410, 380, 390, 360, 390, 390, 410, 390, 380, 380, 390, 420, 420, 410, 410, 380, 360, 370, 370, 390, 380, 350, 340, 380, 400, 350, 340, 330, 320, 340, 340, 340, 310, 310, 300, 280, 310, 260, 250, 240, 230, 190, 210, 170, 150, 150, 130, 130, 120, 100, 100, 70, 50, 100, 110, 110, 130, 110, 110, 150, 200, 220, 280, 260, 300, 330, 340, 380, 390, 400, 410, 430, 460, 480, 470, 450, 430, 470, 500, 520, 490, 470, 470, 500, 510, 510, 510, 480, 460, 480, 510, 480, 510, 480, 480, 490, 520, 500, 490, 470, 480, 470, 520, 510, 490, 480, 470, 490, 480, 480, 460, 440, 420, 460, 480, 480, 450, 440, 420, 450, 460, 470, 450, 450, 420, 440, 470, 460, 460, 440, 430, 450, 490, 480, 440, 470, 460, 510, 510, 470, 490, 500, 480, 490, 520, 490, 490, 480, 480, 490, 530, 510, 520, 490, 490, 490, 510, 540, 520, 490, 490, 510, 520, 520, 500, 500, 520, 550, 590, 560, 550, 540, 550, 590, 630, 640, 620, 590, 610, 610, 660, 670, 650, 650, 660, 650, 690, 630, 640, 630, 610, 630, 620, 600, 610, 600, 570, 600, 610, 600, 600, 560, 560, 580, 580, 560, 550, 550, 560, 580, 590, 590, 570, 550, 560, 560, 590, 570, 560, 560, 540, 580, 590, 570, 550, 510, 470, 430, 400, 320, 290, 330, 530, 820, 1070, 1250, 1440, 1630, 1890, 2140, 2280, 2060, 1490, 790, 350, 320, 440, 480, 490, 500, 520, 520, 540, 530, 510, 510, 500, 530, 560, 550, 520, 500, 500, 530, 550, 560, 550, 520, 530, 530, 550, 540, 530, 540, 540, 560, 570, 560, 540, 520, 540, 570, 590, 590, 590, 550, 550, 580, 560, 580, 580, 520, 560, 570, 600, 560, 580, 550, 530, 550, 590, 570, 570, 550, 530, 540, 550, 520, 530, 490, 490, 510, 510, 500, 480, 440, 450, 440, 470, 440, 410, 370, 350, 380, 390, 360, 320, 290, 280, 280, 310, 280, 250, 250, 210, 250};

uint32_t t_ref;

double getECG(uint32_t t, bool table = 0) {
  uint16_t index = 0;
  if (t <= T_MAX);
  else t = t % (T_MAX + 1);

  while (t_t[index + 1] < t) index++;
  if (t_t[index] == t)  {
    if (table) return v_LII[index];
    else return v_LV[index];
  }
  
  else  {
    // Serial.print("Else (index): " + (String) index);
    if (!table) return (double) v_LII[index] + (float) (v_LII[index + 1] - v_LII[index]) / (float) (t_t[index + 1] - t_t[index]) * (float) (t - t_t[index]) ;
    else return (double) (v_LV[index] + (float) (v_LV[index + 1] - v_LV[index]) / (float) (t_t[index + 1] - t_t[index])) * (float) (t - t_t[index]) ;
  }
}

void setup() {
  Serial.begin(19200);
  t_ref = millis();
}

void loop() {
  if (millis() - t_ref < DELAY);
  else  {
    t_ref = millis();
    Serial.println("Extrnl " + (String) getECG(millis()) + " mV");
  }
}
